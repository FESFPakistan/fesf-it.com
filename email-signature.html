<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {}
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer components {
            .input-field {
                @apply w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent;
            }
            .label-text {
                @apply block text-sm font-medium text-gray-700 mb-1;
            }
            .section-title {
                @apply text-xl font-bold text-gray-800 mb-4;
            }
        }
    </style>
    <title>FESF-IT.com - Email Signature Generator</title>
</head>

<body class="bg-gradient-to-r from-blue-400 to-blue-700 min-h-screen font-mono flex flex-col">
<marquee class="font-bold text-lg bg-gray-200 text-black py-2 shadow-md">
    Email Signature Generator – Create Your Professional Email Signature
</marquee>

<div class="flex-grow max-w-6xl mx-auto mt-10 p-6 bg-white border border-gray-300 rounded-lg shadow-md mb-10">
    <div class="flex items-center space-x-3 mb-6">
        <a href="index.html">
            <img src="https://fesf-it.com/assets/icons/left-arrow-1.png" alt="Back" class="w-auto h-10">
        </a>
        <span class="font-bold">Back to Home</span>
    </div>

    <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">Email Signature Generator</h1>

    <div class="grid md:grid-cols-2 gap-8">
        <!-- Input Form -->
        <div class="space-y-6">
            <!-- Template selector -->
            <div>
                <label for="templateSelect" class="label-text">Template</label>
                <select id="templateSelect" class="input-field" aria-label="Select signature template">
                    <option value="1" selected>Template 1 — Simple (Cambria)</option>
                    <!-- <option value="2">Template 2 — Detailed (current)</option> -->
                </select>
            </div>

            <div class="section-title">Personal Information</div>

            <div>
                <label for="fullName" class="label-text">Full Name *</label>
                <input type="text" id="fullName" class="input-field" placeholder="e.g., Zaid">
            </div>

            <div>
                <label for="jobTitle" class="label-text">Job Title *</label>
                <input type="text" id="jobTitle" class="input-field" placeholder="e.g., IT Manager">
            </div>

<!--            <div>-->
<!--                <label for="department" class="label-text">Department</label>-->
<!--                <input type="text" id="department" class="input-field" placeholder="e.g., Information Technology">-->
<!--            </div>-->

            <div class="section-title mt-8">Contact Information</div>

            <div>
                <label for="mobile" class="label-text">Mobile / WhatsApp</label>
                <input type="tel" id="mobile" class="input-field" placeholder="e.g., +92 333 1234567">
            </div>

<!--            <div>-->
<!--                <label for="phone" class="label-text">Mobile / Phone 2 (Optional)</label>-->
<!--                <input type="tel" id="phone" class="input-field" placeholder="e.g., +92 333 1234567">-->
<!--            </div>-->

            <div>
                <label for="email" class="label-text">Email Address *</label>
                <input type="email" id="email" class="input-field" placeholder="e.g., zaid [at] fesf.org.pk">
            </div>


        </div>

        <!-- Preview Area -->
        <div class="space-y-4">
            <div class="flex justify-between items-center">
                <div class="section-title">Preview</div>
                <button onclick="copySignature(event)" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg shadow-lg">
                    Copy Signature
                </button>
            </div>
            <div class="border-2 border-gray-300 rounded-lg p-4 bg-white min-h-96">
                <div id="signaturePreview"></div>
            </div>

            <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded">
                <p class="text-sm text-blue-800">
                    <strong>How to use:</strong>
                <ol class="list-decimal ml-5 mt-2 space-y-1">
                    <li>Fill in your information in the form</li>
                    <li>Click "Generate Signature" to create your signature</li>
                    <li>Click "Copy Signature" to copy it</li>
                    <li>Paste it into your email client's signature settings</li>
                </ol>
                </p>
            </div>
        </div>
    </div>
</div>

<footer class="bg-gray-800 text-white py-4">
    <div class="max-w-screen-lg mx-auto text-center space-y-2">
        <p class="text-sm">Copyright 2025 FESF-IT. All rights reserved.</p>
    </div>
</footer>

<script>
    // Generate signature on page load with default values
    window.addEventListener('DOMContentLoaded', function() {
        generateSignature();
    });

    // New generateSignature: chooses template and builds HTML accordingly
    function generateSignature() {
        const template = (document.getElementById('templateSelect') && document.getElementById('templateSelect').value) || '2';

        const fullName = document.getElementById('fullName').value || 'Your Name';
        const jobTitle = document.getElementById('jobTitle').value || 'Your Job Title';
        const department = ' - '; // document.getElementById('department').value;
        const mobile = document.getElementById('mobile').value || '+92 345 123 4567';
        // const phone = document.getElementById('phone').value;
        const email = document.getElementById('email').value || 'your.email@fesf.org.pk';
        const website = 'https://www.deafreach.com';
        const whatsapp = document.getElementById('mobile').value;

        if (template === '1') {
            // Template 1: Simple Cambria signature, single phone and email
            const displayName = fullName;
            const displayPhone = mobile || phone || '';
            const displayEmail = email;

            const template1 = `
                <div style="font-family: Cambria, 'Times New Roman', serif; color: #000;">
                    <div style="font-size:14px; color:#000;">
                        <div style="margin-bottom:8px;">
                            <span style="display:block; font-style:normal; color:#333; font-size:13px;font-family: 'Cambria', 'Times New Roman', serif;">Regards,</span>
                            <span style="display:block; font-style:normal; color:#333; font-size:13px;font-family: 'Cambria', 'Times New Roman', serif;">&nbsp;</span>
                            <span style="display:block; font-weight:700; font-size:18px; color:#204f9f;font-family: 'Cambria', 'Times New Roman', serif;">${escapeHtml(displayName)}</span>
<!--                            <span style="display:block; font-style:normal; color:#333;">${escapeHtml(jobTitle)}${department ? '<span style="display:block;color:#666; font-size:13px;">' + escapeHtml(department) + '</span>' : ''}</span>-->
                            <span style="display:block; font-style:normal; color:#333;font-family: Cambria, 'Times New Roman', serif;">${escapeHtml(jobTitle)}</span>
                        </div>
                        <div style="font-size:13px; color:#333;">
                            ${displayPhone ? '☏ ' + escapeHtml(displayPhone) : ''} ${displayPhone && displayEmail ? ' | ' : ''} ${displayEmail ? '✉ <a href="mailto:'+encodeURI(displayEmail)+'" style="color:#204f9f; text-decoration:none;">'+escapeHtml(displayEmail)+'</a>' : ''}
                        </div>
                    </div>
                    <div style="margin-top:10px;">
                        <a href="${website}" style="text-decoration:none; display:inline-block;">
                            <img src="https://fesf-it.com/assets/signature-generator-images/deafreach-logo.png" alt="Deaf Reach" width="160" style="display:block; border:0;">
                        </a>
                    </div>
                </div>
            `;

            document.getElementById('signaturePreview').innerHTML = template1;
            return;
        }

        // Template 2: existing detailed signature (kept mostly unchanged)
        // Build contact info rows
        let contactRows = '';

        // Mobile/WhatsApp row (primary)
        if (mobile) {
            contactRows += `
                <tr>
                    <td style="padding: 4px 8px 4px 0; vertical-align: middle;">
                        <img src="https://fesf-it.com/assets/signature-generator-images/phone-icon.png" alt="" width="16" height="16" style="display: block; border: 0;">
                    </td>
                    <td style="padding: 4px 0; font-family: Arial, sans-serif; font-size: 13px; color: #333;">
                        ${escapeHtml(mobile)}
                    </td>
                </tr>`;
        }

        // Phone 2 row (secondary)
        if (phone) {
            contactRows += `
                <tr>
                    <td style="padding: 4px 8px 4px 0; vertical-align: middle;">
                        <img src="https://fesf-it.com/assets/signature-generator-images/phone-icon.png" alt="" width="16" height="16" style="display: block; border: 0;">
                    </td>
                    <td style="padding: 4px 0; font-family: Arial, sans-serif; font-size: 13px; color: #333;">
                        ${escapeHtml(phone)}
                    </td>
                </tr>`;
        }

        // Email row
        if (email) {
            contactRows += `
                <tr>
                    <td style="padding: 4px 8px 4px 0; vertical-align: middle;">
                        <img src="https://fesf-it.com/assets/signature-generator-images/email-icon.png" alt="" width="16" height="16" style="display: block; border: 0;">
                    </td>
                    <td style="padding: 4px 0; font-family: Arial, sans-serif; font-size: 13px; color: #333;">
                        <a href="mailto:${escapeHtmlAttrib(email)}" style="color: #0066cc; text-decoration: none;">${escapeHtml(email)}</a>
                    </td>
                </tr>`;
        }

        // Website row
        if (website) {
            const websiteDisplay = website.replace(/^https?:\/\/?/, '');
            contactRows += `
                <tr>
                    <td style="padding: 4px 8px 4px 0; vertical-align: middle;">
                        <img src="https://fesf-it.com/assets/signature-generator-images/link-icon.png" alt="" width="16" height="16" style="display: block; border: 0;">
                    </td>
                    <td style="padding: 4px 0; font-family: Arial, sans-serif; font-size: 13px; color: #333;">
                        <a href="${website}" style="color: #0066cc; text-decoration: none;">${escapeHtml(websiteDisplay)}</a>
                    </td>
                </tr>`;
        }

        // Build social media links with hardcoded URLs and colors
        let socialLinks = '';

        // Facebook - hardcoded
        socialLinks += `
                <td style="padding: 0 8px 0 0;">
                    <a href="https://www.facebook.com/deafreachprogram/" >
                        <img src="https://fesf-it.com/assets/signature-generator-images/face-ico.png" width="40">
                    </a>
                </td>`;

        // LinkedIn - hardcoded
        socialLinks += `
                <td style="padding: 0 8px 0 0;">
                    <a href="https://www.linkedin.com/company/fesf/">
                        <img src="https://fesf-it.com/assets/signature-generator-images/ico-link.png" width="40">
                    </a>
                </td>`;

        // WhatsApp - from user input
        if (whatsapp) {
            const whatsappUrl = `https://wa.me/${whatsapp.replace(/[^0-9]/g, '')}`;
            socialLinks += `
                    <td style="padding: 0 8px 0 0;">
                        <a href="${whatsappUrl}">
                            <img src="https://fesf-it.com/assets/signature-generator-images/whatsapp-icon.png" width="40">
                        </a>
                    </td>`;
        }

        // Generate the complete signature HTML
        const signatureHTML = `<table cellpadding="0" cellspacing="0" border="0" style="font-family: Arial, sans-serif; line-height: 1.4;">
    <tbody>
        <tr>
            <td style="padding-bottom: 16px;">
                <table cellpadding="0" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                            <td style="padding-right: 16px; vertical-align: top;">
                                <h2 style="margin: 0 0 4px 0; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; color: #222;">${escapeHtml(fullName)}</h2>
                                <p style="margin: 0 0 8px 0; font-family: Arial, sans-serif; font-size: 14px; color: #666; font-style: italic;">
                                    ${escapeHtml(jobTitle)}${department ? '<br>' + escapeHtml(department) : ''}
                                </p>
                            </td>
                            <td style="padding: 0 16px; border-left: 3px solid #0066cc;">
                                <table cellpadding="0" cellspacing="0" border="0">
                                    <tbody>
                                        ${contactRows}
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td style="padding-top: 16px; border-top: 2px solid #e0e0e0;">
                <table cellpadding="0" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                            <td style="padding-right: 16px; vertical-align: middle;">
                                <img src="https://fesf-it.com/assets/signature-generator-images/deafreach-logo.png" alt="Deaf Reach" width="200" style="display: block; border: 0; margin-right:50px">
                            </td>
                            <td style="vertical-align: middle;">
                                <table cellpadding="0" cellspacing="0" border="0">
                                    <tbody>
                                        <tr>
                                            ${socialLinks}
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>`;

        // Update preview
        document.getElementById('signaturePreview').innerHTML = signatureHTML;
    }

    function copySignature(event) {
        const signaturePreview = document.getElementById('signaturePreview');
        const html = signaturePreview.innerHTML;
        const text = signaturePreview.innerText || signaturePreview.textContent || '';

        // Robustly find the button element (in case inner nodes are clicked)
        const btn = (event && event.target && event.target.closest) ? event.target.closest('button') : null;

        // Helper to show copied UI feedback
        function showCopied(button) {
            if (!button) return;
            const originalText = button.textContent;
            button.textContent = '✓ Copied!';
            button.classList.remove('bg-green-600', 'hover:bg-green-700');
            button.classList.add('bg-green-800');

            setTimeout(function() {
                button.textContent = originalText;
                button.classList.remove('bg-green-800');
                button.classList.add('bg-green-600', 'hover:bg-green-700');
            }, 2000);
        }

        // Fallback method using execCommand on a temporary hidden element
        function fallbackCopy() {
            const container = document.createElement('div');
            container.style.position = 'fixed';
            container.style.pointerEvents = 'none';
            container.style.opacity = '0';
            container.innerHTML = html;
            document.body.appendChild(container);

            const range = document.createRange();
            range.selectNodeContents(container);

            const sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);

            try {
                const ok = document.execCommand('copy');
                sel.removeAllRanges();
                document.body.removeChild(container);
                if (ok) {
                    showCopied(btn);
                } else {
                    alert('Failed to copy. Please select the signature manually and copy it.');
                }
            } catch (err) {
                document.body.removeChild(container);
                sel.removeAllRanges();
                alert('Failed to copy. Please select the signature manually and copy it.');
                console.error('Copy error:', err);
            }
        }

        // Try modern Clipboard API first (supports HTML when ClipboardItem is available)
        if (navigator.clipboard && navigator.clipboard.write) {
            // Prefer writing HTML + plain text
            try {
                if (typeof ClipboardItem !== 'undefined') {
                    const blobHtml = new Blob([html], { type: 'text/html' });
                    const blobText = new Blob([text], { type: 'text/plain' });
                    const item = new ClipboardItem({
                        'text/html': blobHtml,
                        'text/plain': blobText
                    });
                    navigator.clipboard.write([item]).then(function() {
                        showCopied(btn);
                    }).catch(function(err) {
                        // If Clipboard API fails, fallback
                        console.warn('Clipboard API write failed, falling back:', err);
                        fallbackCopy();
                    });
                } else {
                    // ClipboardItem not supported — fall back to writeText (plain text) or fallbackCopy
                    navigator.clipboard.writeText(text).then(function() {
                        showCopied(btn);
                    }).catch(function(err) {
                        console.warn('navigator.clipboard.writeText failed, falling back:', err);
                        fallbackCopy();
                    });
                }
            } catch (err) {
                console.warn('Clipboard API error, falling back:', err);
                fallbackCopy();
            }
        } else {
            // Older browsers: fallback to execCommand approach
            fallbackCopy();
        }
    }

    // Auto-generate on input change
    document.querySelectorAll('input, textarea').forEach(function(element) {
        element.addEventListener('input', generateSignature);
    });

    // Also regenerate when template select changes
    var tsel = document.getElementById('templateSelect');
    if (tsel) {
        tsel.addEventListener('change', generateSignature);
    }

    // Utility: escape HTML to avoid accidental markup injection in preview
    function escapeHtml(str) {
        if (!str && str !== 0) return '';
        return String(str)
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;');
    }

    function escapeHtmlAttrib(str) {
        return escapeHtml(str).replace(/&quot;/g, '"');
    }
</script>
</body>

</html>
